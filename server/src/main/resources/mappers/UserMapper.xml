<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.longyan.policy.mapper.UserMapper">
    <select id="findUserByUserName" resultType="User">
        select id,user_name,password,tele,email,role from user
        where user_name=#{userName}
    </select>

    <select id="getAllUsers" resultType="User">
        select id,user_name,tele,email,role from user
    </select>

    <select id="findUserById" parameterType="Integer" resultType="User">
        select id,user_name,tele,email,role from user
        where id=#{id}
    </select>

    <insert id="addUser" parameterType="User" useGeneratedKeys="true" keyProperty="id">
        insert into user(user_name,password,tele,email,role)
        values(#{userName},#{password},#{tele},#{email},#{role})
    </insert>

    <update id="updateUserInfo" parameterType="User">
        update user
        <trim prefix="set" suffixOverrides=",">
            <if test="userName!=null">user_name=#{userName}</if>
            <if test="password!=null">password=#{password}</if>
            <if test="tele!=null">tele=#{tele}</if>
            <if test="email!=null">email=#{email}</if>
        </trim>
        where id=#{id}
    </update>
</mapper>
